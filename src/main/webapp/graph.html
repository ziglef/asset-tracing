<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title>Graph Visualization Demo</title>
        <script src="components/vis/dist/vis.js"></script>
        <link href="components/vis/dist/vis.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1>Titan Web Graph Visualization</h1>
        <div id="visualization-graph" style="height: 700px; width: 100%"></div>
        <div id="visualization-timeline" style="height: 300px; width: 100%"></div>
        <script type="text/javascript">

            function httpGet(theUrl) {
                var xmlHttp = new XMLHttpRequest();
                xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
                xmlHttp.send( null );
                return xmlHttp.responseText;
            }

            var node_names = httpGet("http://localhost:9091/rest/listVertices").replace(/\"/g, "").split(' ');
            var edge_names = httpGet("http://localhost:9091/rest/listEdges").replace(/\"/g, "").split(' ');

            // console.log("node_names: " + node_names);
            // console.log("edge_names: " + edge_names);

            var nodes = new vis.DataSet();
            var edges = new vis.DataSet();
            var index;

            for(index=0; index<node_names.length; ++index){
                nodes.add({
                    id: node_names[index],
                    label: node_names[index]
                });
            }

            for(index=0; index<edge_names.length; index+=2){
                edges.add({
                    from: edge_names[index],
                    to: edge_names[index+1],
                    arrows: 'to'
                });
            }

            // create a network
            var container_graph = document.getElementById('visualization-graph');
            var data = {
                nodes: nodes,
                edges: edges
            };
            var options_graph = {};
            var network = new vis.Network(container_graph, data, options_graph);

            // Timeline
            // DOM element where the Timeline will be attached
            var container_timeline = document.getElementById('visualization-timeline');


            var timeline_nodes = new vis.DataSet();

            for(index=0; index<node_names.length; ++index){
                timeline_nodes.add({
                    id: node_names[index],
                    content: node_names[index],
                    start: '2016-04-01'
                });
            }

            // Configuration for the Timeline
            var options_timeline = {};

            // Create a Timeline
            var timeline = new vis.Timeline(container_timeline, timeline_nodes, options_timeline);
        </script>
    </body>
</html>